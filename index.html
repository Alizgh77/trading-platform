<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Back To Future</title>
    <link rel="stylesheet" href="styles/main.css" />
    <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
</head>

<body>
    <!-- Header -->
    <div class="top-bar">
        <div class="form-inline">
            <strong>Timeframe:</strong>
            <button onclick="setTimeframe('1')">Lower</button>
            <button onclick="setTimeframe('5')">Middle</button>
            <button onclick="setTimeframe('15')">Higher</button>
        </div>

        <strong>TRADING CHART</strong>

        <div class="form-inline">
            <strong>Indicators:</strong>
            <select id="indicatorSelect">
                <option value="">Select</option>
                <option value="ema">EMA</option>
            </select>
            <button onclick="addIndicator()">Add</button>
            <button onclick="removeIndicator()">Remove</button>
        </div>
    </div>

    <!-- Trade Controls -->
    <div class="top-bar">
        <div class="form-inline">
            <label>TP%</label><input type="number" id="tpInput" placeholder="opt." />
            <label>SL%</label><input type="number" id="slInput" required placeholder="e.g. 1" />
            <label>Risk:</label><input type="number" id="riskInput" required placeholder="e.g. 2" />
            <label>Type:</label>
            <select id="riskType">
                <option value="percent">%</option>
                <option value="dollar">$</option>
                <option value="lot">Lot</option>
            </select>
        </div>
        <div class="form-inline">
            <button onclick="openPosition('buy')" style="background-color:#2196f3; color:white;">Buy</button>
            <button onclick="openPosition('sell')" style="background-color:#ff1900; color:white;">Sell</button>
        </div>
    </div>

    <!-- Chart -->
    <div id="chart" style="height: 500px;"></div>

    <!-- Controls -->
    <div class="center-controls">
        <button id="playPauseBtn" onclick="togglePlayPause()">▶</button>
        <button id="speedBtn" onclick="cycleSpeed()">×1</button>
        <button onclick="nextCandle()">→</button>
    </div>

    <!-- Metrics -->
    <div class="metrics">
        Balance: $<span id="balance">10000</span> |
        Equity: $<span id="equity">10000</span> |
        Floating: $<span id="floating">0.00</span>
    </div>

    <!-- Tabs -->
    <div class="tab-container">
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('positions')">Open Positions</button>
            <button class="tab-btn" onclick="showTab('statement')">Trade History</button>
            <button class="tab-btn" onclick="showTab('full-statement')">Account Statement</button>
        </div>

        <div id="positions" class="tab-content active">
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Entry</th>
                        <th>Size</th>
                        <th>TP</th>
                        <th>SL</th>
                        <th>Floating</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="positionTable"></tbody>
            </table>
        </div>

        <div id="statement" class="tab-content">
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Entry</th>
                        <th>Exit</th>
                        <th>Size</th>
                        <th>TP</th>
                        <th>SL</th>
                        <th>PnL</th>
                        <th>Commission</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody id="statementTable"></tbody>
            </table>
        </div>

        <div id="full-statement" class="tab-content">
            <div id="accountStatementSummary" class="statement-summary"></div>
            <div id="balanceChart" style="height: 250px; margin-bottom: 20px;"></div>
        </div>
    </div>

    <script type="module" src="scripts/main.js"></script>
</body>

</html>